"""
PHOTO_MAP.PY - –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ file_id —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Render Free (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã)
"""

import json
import os
from typing import Dict, List, Optional

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ
try:
    from preloaded_photos import PRELOADED_PHOTOS
except ImportError:
    PRELOADED_PHOTOS = {}

# ==================== –ü–£–¢–¨ –ö –§–ê–ô–õ–£ –•–†–ê–ù–ï–ù–ò–Ø ====================
PHOTO_MAP_FILE = "photo_map_data.json"

# ==================== –°–¢–ê–ù–î–ê–†–¢–ù–´–ï –ö–õ–Æ–ß–ò –î–õ–Ø –í–°–ï–• –§–û–¢–û ====================
ALL_PHOTO_KEYS = {
    # ‚îÄ‚îÄ –¢–ï–õ–û (8 —Ñ–æ—Ç–æ) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "cream_body":        "–ö—Ä–µ–º —Å—É—Ñ–ª–µ –¥–ª—è —Ç–µ–ª–∞",
    "hydrophilic_oil":   "–ì–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω–æ–µ –º–∞—Å–ª–æ",
    "body_butter":       "–ë–∞—Ç—Ç–µ—Ä –¥–ª—è —Ç–µ–ª–∞",
    "body_milk":         "–ú–æ–ª–æ—á–∫–æ –¥–ª—è —Ç–µ–ª–∞",
    "hualuronic_acid":   "–ì–∏–∞–ª—É—Ä–æ–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞",
    "body_scrub":        "–°–∫—Ä–∞–± –¥–ª—è —Ç–µ–ª–∞",
    "shower_gel":        "–ì–µ–ª—å –¥–ª—è –¥—É—à–∞",
    "perfumed_soap":     "–ü–∞—Ä—Ñ—é–º–µ—Ä–Ω–æ–µ –º—ã–ª–æ",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî –±–∞–∑–æ–≤—ã–π —É—Ö–æ–¥ –¥–ª—è –±–ª–æ–Ω–¥–∏–Ω–æ–∫ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "blonde_shampoo":       "–®–∞–º–ø—É–Ω—å –¥–ª—è –±–ª–æ–Ω–¥–∏–Ω–æ–∫",
    "blonde_conditioner":   "–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä –¥–ª—è –±–ª–æ–Ω–¥–∏–Ω–æ–∫",
    "blonde_mask":          "–ú–∞—Å–∫–∞ –¥–ª—è –±–ª–æ–Ω–¥–∏–Ω–æ–∫",
    "dry_oil_spray":        "–°—É—Ö–æ–µ –º–∞—Å–ª–æ —Å–ø—Ä–µ–π",
    "mask_pink_powder":     "–ú–∞—Å–∫–∞ —Ä–æ–∑–æ–≤–∞—è –ø—É–¥—Ä–∞",
    "mask_mother_of_pearl": "–ú–∞—Å–∫–∞ –ø–µ—Ä–ª–∞–º—É—Ç—Ä",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî –±–∞–∑–æ–≤—ã–π —É—Ö–æ–¥ –¥–ª—è –æ–∫—Ä–∞—à–µ–Ω–Ω—ã—Ö ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "colored_shampoo":      "–®–∞–º–ø—É–Ω—å –¥–ª—è –æ–∫—Ä–∞—à–µ–Ω–Ω—ã—Ö –≤–æ–ª–æ—Å",
    "colored_conditioner":  "–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä –¥–ª—è –æ–∫—Ä–∞—à–µ–Ω–Ω—ã—Ö",
    "colored_mask":         "–ú–∞—Å–∫–∞ –¥–ª—è –æ–∫—Ä–∞—à–µ–Ω–Ω—ã—Ö",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî –±–∞–∑–æ–≤—ã–π —É—Ö–æ–¥ –¥–ª—è –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "natural_shampoo":      "–®–∞–º–ø—É–Ω—å —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏ —Å–∏–ª–∞",
    "natural_conditioner":  "–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏ —Å–∏–ª–∞",
    "strengthening_spray":  "–£–∫—Ä–µ–ø–ª—è—é—â–∏–π —Å–ø—Ä–µ–π –¥–ª—è –≤–æ–ª–æ—Å",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî –¥–ª—è —Ç–æ–Ω–∫–∏—Ö –≤–æ–ª–æ—Å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "thin_hair_shampoo":     "–®–∞–º–ø—É–Ω—å –¥–ª—è —Ç–æ–Ω–∫–∏—Ö –≤–æ–ª–æ—Å",
    "thin_hair_conditioner": "–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä –¥–ª—è —Ç–æ–Ω–∫–∏—Ö –≤–æ–ª–æ—Å",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "reconstruct_shampoo": "–®–∞–º–ø—É–Ω—å —Ä–µ–∫–æ–Ω—Å—Ç—Ä–∞–∫—Ç",
    "reconstruct_mask":    "–ú–∞—Å–∫–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä–∞–∫—Ç",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî —Å–ø—Ä–µ–∏, –∫—Ä–µ–º—ã, –º–∞—Å–ª–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "biolipid_spray":     "–ë–∏–æ–ª–∏–ø–∏–¥–Ω—ã–π —Å–ø—Ä–µ–π",
    "protein_cream":      "–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π –∫—Ä–µ–º",
    "hair_milk":          "–ú–æ–ª–æ—á–∫–æ –¥–ª—è –≤–æ–ª–æ—Å",
    "hair_fluid":         "–§–ª—é–∏–¥ –¥–ª—è –≤–æ–ª–æ—Å",
    "oil_elixir":         "–ú–∞—Å–ª–æ ELIXIR",
    "oil_concentrate":    "–ú–∞—Å–ª–æ-–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî —É–∫—Ä–µ–ø–ª—è—é—â–∏–π —É—Ö–æ–¥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "strengthening_mask": "–£–∫—Ä–µ–ø–ª—è—é—â–∞—è –º–∞—Å–∫–∞ –¥–ª—è –≤–æ–ª–æ—Å",

    # ‚îÄ‚îÄ –í–û–õ–û–°–´ ‚Äî –ª–µ—á–µ–±–Ω—ã–π —É—Ö–æ–¥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "anti_loss_shampoo":       "–®–∞–º–ø—É–Ω—å –ø—Ä–æ—Ç–∏–≤ –≤—ã–ø–∞–¥–µ–Ω–∏—è",
    "hair_growth_lotion":      "–õ–æ—Å—å–æ–Ω —Å—Ç–∏–º—É–ª–∏—Ä—É—é—â–∏–π —Ä–æ—Å—Ç –≤–æ–ª–æ—Å",
    "anti_dandruff_shampoo":   "–®–∞–º–ø—É–Ω—å –ø—Ä–æ—Ç–∏–≤ –ø–µ—Ä—Ö–æ—Ç–∏",
    "sensitive_scalp_shampoo": "–®–∞–º–ø—É–Ω—å –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏ –≥–æ–ª–æ–≤—ã",

    # ‚îÄ‚îÄ –û—Ç—Ç–µ–Ω–æ—á–Ω—ã–µ –º–∞—Å–∫–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "mask_cold_chocolate": "–ú–∞—Å–∫–∞ —Ö–æ–ª–æ–¥–Ω—ã–π —à–æ–∫–æ–ª–∞–¥",
    "mask_copper":         "–ú–∞—Å–∫–∞ –º–µ–¥–Ω—ã–π",

    # ‚îÄ‚îÄ –ú—É–∂—Å–∫–∞—è –ª–∏–Ω–∏—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    "men_shampoo": "–®–∞–º–ø—É–Ω—å –¥–ª—è –º—É–∂—á–∏–Ω",
}

# ==================== –ì–õ–û–ë–ê–õ–¨–ù–û–ï –•–†–ê–ù–ò–õ–ò–©–ï –í –ü–ê–ú–Ø–¢–ò ====================
# –ù–∞ Render Free –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞–º—è—Ç—å –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–æ–≤
_photo_storage = PRELOADED_PHOTOS.copy()

# ==================== –ó–ê–ì–†–£–ó–ö–ê –ò –°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• ====================

def load_photo_map() -> Dict[str, str]:
    """–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ-–º–∞–ø (–¥–ª—è Render Free –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –ø–∞–º—è—Ç—å)"""
    try:
        print("üì∏ –ó–∞–≥—Ä—É–∂–∞—é –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ –∏–∑ –ø–∞–º—è—Ç–∏...")
        return _photo_storage.copy()
    except Exception as e:
        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ: {e}")
        return PRELOADED_PHOTOS.copy()

def save_photo_map(data: Dict[str, str]):
    """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–æ—Ç–æ-–º–∞–ø (–Ω–∞ Render Free —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏)"""
    try:
        global _photo_storage
        _photo_storage = data.copy()
        print(f"üíæ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–æ—Ç–æ –≤ –ø–∞–º—è—Ç–∏: {len(data)} –∑–∞–ø–∏—Å–µ–π")
        return True
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ: {e}")
        return False

# ==================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================

def get_photo_file_id(product_key: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å file_id –¥–ª—è product_key"""
    return _photo_storage.get(product_key, "")

def set_photo_file_id(product_key: str, file_id: str) -> bool:
    """–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å file_id –¥–ª—è product_key"""
    if product_key not in ALL_PHOTO_KEYS:
        print(f"‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–ª—é—á: {product_key}")
        return False

    _photo_storage[product_key] = file_id
    print(f"‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Ñ–æ—Ç–æ –¥–ª—è: {ALL_PHOTO_KEYS.get(product_key, product_key)}")
    return True

def get_all_photos() -> Dict[str, str]:
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏"""
    return _photo_storage.copy()

def get_photos_by_keys(photo_keys: List[str]) -> List[str]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ file_id –ø–æ —Å–ø–∏—Å–∫—É –∫–ª—é—á–µ–π"""
    result = []
    for key in photo_keys:
        if key in _photo_storage and _photo_storage[key]:
            result.append(_photo_storage[key])
    return result

def get_missing_photos() -> List[Dict[str, str]]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–æ—Ç–æ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º"""
    missing = []

    for key, name in ALL_PHOTO_KEYS.items():
        file_id = _photo_storage.get(key, "")
        status = "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ" if file_id else "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
        missing.append({
            "key": key,
            "name": name,
            "status": status,
            "file_id": file_id
        })

    # –°–æ—Ä—Ç–∏—Ä—É–µ–º: —Å–Ω–∞—á–∞–ª–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ, –ø–æ—Ç–æ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ
    missing.sort(key=lambda x: (0 if x["status"] == "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç" else 1, x["name"]))
    return missing

def get_photo_stats() -> Dict[str, int]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ñ–æ—Ç–æ"""
    total = len(ALL_PHOTO_KEYS)
    loaded = sum(1 for key in ALL_PHOTO_KEYS if key in _photo_storage and _photo_storage[key])

    return {
        "total": total,
        "loaded": loaded,
        "missing": total - loaded,
        "percentage": round((loaded / total) * 100, 1) if total > 0 else 0
    }

def reset_all_photos() -> bool:
    """–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ (–æ—á–∏—Å—Ç–∏—Ç—å –ø–∞–º—è—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ)"""
    try:
        global _photo_storage
        _photo_storage = PRELOADED_PHOTOS.copy()
        print("üîÑ –í—Å–µ —Ñ–æ—Ç–æ —Å–±—Ä–æ—à–µ–Ω—ã –¥–æ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö")
        return True
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ —Ñ–æ—Ç–æ: {e}")
        return False

def initialize_with_preloaded():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ —Ñ–æ—Ç–æ"""
    try:
        global _photo_storage
        _photo_storage = PRELOADED_PHOTOS.copy()

        loaded = sum(1 for v in PRELOADED_PHOTOS.values() if v)
        total = len(PRELOADED_PHOTOS)

        print(f"üì∏ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ {loaded}/{total} –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ")
        return True
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: {e}")
        return False

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
print("üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è photo_map...")
initialize_with_preloaded()
stats = get_photo_stats()
print(f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: {stats['loaded']}/{stats['total']} —Ñ–æ—Ç–æ ({stats['percentage']}%)")
